@model IEnumerable<ProjetoDavin.Models.Contato>

@{
  ViewData["Title"] = "Pesquisar Contatos";
}

<h1>Pesquisar Contatos</h1>

<form asp-action="Search">
  <div class="form-group">
    <label for="nome">Nome</label>
    <input type="text" name="nome" class="form-control" />
  </div>
  <div class="form-group">
    <label for="numero">Número do Telefone</label>
    <input type="text" name="numero" class="form-control" />
  </div>
  <div class="form-group">
    <input type="submit" value="Pesquisar" class="btn btn-primary" />
  </div>
</form>

@if (Model != null && Model.Any())
{
  <table class="table">
    <thead>
      <tr>
        <th>@Html.DisplayNameFor(model => model.First().Nome)</th>
        <th>@Html.DisplayNameFor(model => model.First().Idade)</th>
        <th>Telefones</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @foreach (var item in Model)
      {
        <tr>
          <td>@Html.DisplayFor(modelItem => item.Nome)</td>
          <td>@Html.DisplayFor(modelItem => item.Idade)</td>
          <td>
            @foreach (var telefone in item.Telefones)
            {
              <p>@telefone.Numero</p>
            }
          </td>
          <td>
            <a asp-action="Edit" asp-route-id="@item.Id">Editar</a> |
            <a asp-action="Details" asp-route-id="@item.Id">Detalhes</a> |
            <a asp-action="Delete" asp-route-id="@item.Id">Excluir</a>
          </td>
        </tr>
      }
    </tbody>
  </table>
}
else
{
  <p>Nenhum contato encontrado.</p>
}